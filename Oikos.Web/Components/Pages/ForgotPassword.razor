@page "/forgot-password"
@using Microsoft.AspNetCore.Components
@rendermode InteractiveServer
@attribute [AllowAnonymous]
@using Microsoft.AspNetCore.Components.Forms

<MudContainer MaxWidth="MaxWidth.Small" Class="forgot-password-container">
    <MudPaper Class="pa-6" Elevation="2">
        <MudStack Spacing="3">
            <MudText Typo="Typo.h5">@Loc["ForgotPassword_Title"]</MudText>
            <MudText Typo="Typo.body2" Class="mud-text-secondary">@Loc["ForgotPassword_Subtitle"]</MudText>

            @if (_requestCompleted)
            {
                <MudAlert Severity="Severity.Success" Dense="true">
                    @Loc["ForgotPassword_Success"]
                </MudAlert>
            }

            <EditForm EditContext="_editContext" OnValidSubmit="SubmitAsync" class="mt-2">
                <DataAnnotationsValidator />
                <MudTextField @bind-Value="_model.Email" Label="@Loc["ForgotPassword_EmailLabel"]" Variant="Variant.Outlined"
                              InputType="InputType.Email" For="@(() => _model.Email)" Immediate="true" Disabled="_requestCompleted || _isSubmitting"></MudTextField>
                <ValidationMessage For="@(() => _model.Email)" />

                <MudStack Row="true" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween" Class="mt-4">
                    <MudLink Href="@GetBackLink()" Class="mud-text-caption">@Loc["ForgotPassword_BackToLogin"]</MudLink>
                    <MudButton Color="Color.Primary" Variant="Variant.Filled" ButtonType="ButtonType.Submit"
                               Disabled="_requestCompleted || _isSubmitting">
                        @if (_isSubmitting)
                        {
                            <MudProgressCircular Indeterminate="true" Size="Size.Small" Class="mr-2" />
                        }
                        @Loc["ForgotPassword_Submit"]
                    </MudButton>
                </MudStack>
            </EditForm>
        </MudStack>
    </MudPaper>
</MudContainer>

<style>
    .forgot-password-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
    }
</style>
